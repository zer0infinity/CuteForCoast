#-----------------------------------------------------------------------------------------------------
# Copyright (c) 2005, Peter Sommerlad and IFS Institute for Software at HSR Rapperswil, Switzerland
# All rights reserved.
#
# This library/application is free software; you can redistribute and/or modify it under the terms of
# the license that is included with this library/application in the file license.txt.
#-----------------------------------------------------------------------------------------------------
{
	/Modules {
		RenderersModule
		SecurityModule
		RolesModule
		PagesModule
		ServersModule
		LocalizationModule
		TemplatesCacheModule
	}

	/StringFile "LocalizedStrings" ## SOP: this is an old feature might use any-include instead

	/Servers {}
	/SecurityModule {}

	/Renderers {
		/URLRenderer	{ URL }
		/ContextLookupRenderer	{ Lookup ContextLookup Render }
		/HTMLTemplateRenderer	{ HTML }
		/FormRenderer	{ Form }
		/IncrementRenderer { Inc }
		/SetLanguageRenderer { SwitchLanguage }
		/StringRenderer { String }
		/TailRenderer	{ Tail }
	}

	/Pages {
		/Page {
			TestPage
			TemplateParserExtendedTest
		}
	}
	/Roles {
		/Role {
			TestRole
			/RTGuest {
				RTCustomer
			}
		}
	}
	/DefaultRole TestRole

	/HTMLTemplateConfig {
		/TemplateDir		"config/HTMLTemplates"
		/LanguageDirMap {	# maps language key to localized templates dir
			/D				"."
			#/E				"."   No E Map -> English pages are not cached !!
			/F				"."
			/I				"."
		}
		/ParserConfig {
			/Tags {
				/fooPreserve {
					/AttrNameCase	preserve
				}
				/fooUpper {
					/AttrNameCase	upper
				}
			}
		}
	}

######## Test specific section ########

	/EnvForAllCases {
		/TestDomain	"hsr.loc"
		/RoundClosures	{
			/"200002021400"		1
			/"200002031400"		2
			/"200002041400"		3
			/"200002051400"		4
		}
	}

	/RunOnly {
	}

	/TestCases
	{
		## Nested LookuRendererTests
		/NestedLookupRendererTest{
			/TmpStore {
				/Indirect "Direct"
				/Direct	"Gotcha!"
			}
			/Renderer {
				/Lookup {
					{
						/Lookup
						{
							/Lookup Indirect
						}
					}
				}			}
			/Expected	"Gotcha!"
		}
		## StringTokenizeRenderer-Tests
		/StringTokenizeRendererSlashTokenTest {
			/Env {
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String	"a/b/c"
					/Token	"/"
					/RenderToken	"1;3"
				}
			}
			/Expected	"ac"
		}
		/StringTokenizeRendererSlashTokenLookupTest {
			/Env {
				/InString	"a/b/c"
				/InToken	"/"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"1;3"
				}
			}
			/Expected	"ac"
		}
		/StringTokenizeRendererEmptyTest {
			/Env {
				/InString	"abc"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	1
				}
			}
			/Expected	""
		}
		/StringTokenizeRendererDefaultTest {
			/Env {
				/InString	"abc"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	1
					/Default		{ /Lookup InString }
				}
			}
			/Expected	"abc"
		}
		/StringTokenizeRendererFirstTokenTest {
			/Env {
				/InString	"abc;"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	1
				}
			}
			/Expected	"abc"
		}
		/StringTokenizeRendererSecondTokenTest {
			/Env {
				/InString	"abc;"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	2
				}
			}
			/Expected	""
		}
		/StringTokenizeRendererNonExistingTokenTest {
			/Env {
				/InString	"abc;"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	3
				}
			}
			/Expected	""
		}
		/StringTokenizeRendererFirstReverseTokenTest {
			/Env {
				/InString	"abc;"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	-1
				}
			}
			/Expected	""
		}
		/StringTokenizeRendererSecondReverseTokenTest {
			/Env {
				/InString	"abc;"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	-2
				}
			}
			/Expected	"abc"
		}
		/StringTokenizeRendererListOfTokensTest {
			/Env {
				/InString	"abc;def;ghi;jkl"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"1;3"
				}
			}
			/Expected	"abcghi"
		}
		/StringTokenizeRendererReverseListOfTokensTest {
			/Env {
				/InString	"abc;def;ghi;jkl"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"-1;-3"
				}
			}
			/Expected	"jkldef"
		}
		/StringTokenizeRendererListOfTokensWithFillerTest {
			/Env {
				/InString	"abc;def;ghi;jkl"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"1;3"
					/OutputFiller	":"
				}
			}
			/Expected	"abc:ghi"
		}
		/StringTokenizeRendererListOfTokensWithEmptyInTokensTest {
			/Env {
				/InString	"abc;;;jkl"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"1;4"
					/OutputFiller	":"
				}
			}
			/Expected	"abc:jkl"
		}
		/StringTokenizeRendererListOfTokensMultiCharTokenTest {
			/Env {
				/InString	"abcAAdefAAjkl"
				/InToken	"AA"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"1;2"
					/OutputFiller	":"
				}
			}
			/Expected	"abc:def"
		}
		/StringTokenizeRendererListOfUndefinedTokensTest {
			/Env {
				/InString	"abc;def;ghi"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"1;3;4;5"
					/OutputFiller	":"
				}
			}
			/Expected	"abc:ghi"
		}
		/StringTokenizeRendererValidTokenRangeTest {
			/Env {
				/InString	"abc;def;ghi;jkl;mno"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"2-4"
					/OutputFiller	":"
				}
			}
			/Expected	"def:ghi:jkl"
		}
		/StringTokenizeRendererTokenRangeExceededTest {
			/Env {
				/InString	"abc;def;ghi;jkl;mno"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"3-10"
					/OutputFiller	":"
				}
			}
			/Expected	"ghi:jkl:mno"
		}
		/StringTokenizeRendererUpToEndTest {
			/Env {
				/InString	"abc;def;ghi;jkl;mno"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"3-"
					/OutputFiller	":"
				}
			}
			/Expected	"ghi:jkl:mno"
		}
		/StringTokenizeRendererValidTokenRangeNegativeTest {
			/Env {
				/InString	"abc;def;ghi;jkl;mno"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"-2--4"
					/OutputFiller	":"
				}
			}
			/Expected	"jkl:ghi:def"
		}
		/StringTokenizeRendererValidTokenRangeNegativeUpToTheEndTest {
			/Env {
				/InString	"abc;def;ghi;jkl;mno"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"-4--1"
					/OutputFiller	":"
				}
			}
			/Expected	"def:ghi:jkl:mno"
		}
		/StringTokenizeRendererTokenRangeExceededNegativeTest {
			/Env {
				/InString	"abc;def;ghi;jkl;mno"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"-3--10"
					/OutputFiller	":"
				}
			}
			/Expected	"ghi:def:abc"
		}
		/StringTokenizeRendererUpToEndNegativeTest {
			/Env {
				/InString	"abc;def;ghi;jkl;mno"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"-3-"
					/OutputFiller	":"
				}
			}
			/Expected	"ghi:def:abc"
		}
		/StringTokenizeRendererRangeNumberCombinationTest {
			/Env {
				/InString	"abc;def;ghi;jkl;mno;pqr;stu;vwx"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"2-5;7"
					/OutputFiller	":"
				}
			}
			/Expected	"def:ghi:jkl:mno:stu"
		}
		/StringTokenizeRendererRangeRangeCombinationTest {
			/Env {
				/InString	"abc;def;ghi;jkl;mno;pqr;stu;vwx"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"1-3;5-7"
					/OutputFiller	":"
				}
			}
			/Expected	"abc:def:ghi:mno:pqr:stu"
		}
		/StringTokenizeRendererNumberUpToEndTest {
			/Env {
				/InString	"abc;def;ghi;jkl;mno;pqr;stu;vwx"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"2;5-"
					/OutputFiller	":"
				}
			}
			/Expected	"def:mno:pqr:stu:vwx"
		}
		/StringTokenizeRendererTokenRangeUpToElementBeforeLastTest {
			/Env {
				/InString	"abc;def;ghi;jkl;mno;pqr;stu;vwx"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"1--2"
					/OutputFiller	":"
				}
			}
			/Expected	"abc:def:ghi:jkl:mno:pqr:stu"
		}
		/StringTokenizeRendererOverlappingRangeTest {
			/Env {
				/InString	"abc;def;ghi;jkl;mno;pqr;stu;vwx"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"1-3;2-4"
					/OutputFiller	":"
				}
			}
			/Expected	"abc:def:ghi:def:ghi:jkl"
		}
		/StringTokenizeRendererUpAndDownWrongIdeaTest {
			/Env {
				/InString	"abc;def;ghi;jkl;mno;pqr;stu;vwx"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"1-;-8-"
					/OutputFiller	":"
				}
			}
			/Expected	"abc:def:ghi:jkl:mno:pqr:stu:vwx:abc"
		}
		/StringTokenizeRendererUpAndDownTest {
			/Env {
				/InString	"abc;def;ghi;jkl;mno;pqr;stu;vwx"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"1-;-1-"
					/OutputFiller	":"
				}
			}
			/Expected	"abc:def:ghi:jkl:mno:pqr:stu:vwx:vwx:stu:pqr:mno:jkl:ghi:def:abc"
		}
		/StringTokenizeRendererWrongPosIndexTest {
			/Env {
				/InString	"abc;def"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"4"
					/OutputFiller	":"
					/Default		"gugus"
				}
			}
			/Expected	"gugus"
		}
		/StringTokenizeRendererWrongNegIndexTest {
			/Env {
				/InString	"abc;def"
				/InToken	";"
			}
			/Renderer {
				/StringTokenizeRenderer {
					/String			{ /Lookup InString }
					/Token			{ /Lookup InToken }
					/RenderToken	"-4"
					/OutputFiller	":"
				}
			}
			/Expected	""
		}
		{
			/Env {
				/"The.List.With.Dots" {
					/"hsr.loc" 	Winner
					/"etoys.com"	Looser
				}
			}
			/Renderer {
				/ContextLookupRenderer	{
					/LookupName		"The.List.With.Dots/hsr.loc"
					/Delim			"/"
				}
			}
			/Expected	"Winner"
		}
		{
			/Env {
				/"The.List.With.Dots"	{
					/"The:Slot:With:Indexes" {
						/"hsr.loc" 	Winner
						/"etoys.com"	Looser
					}
				}
			}
			/Renderer {
				/ContextLookupRenderer	{
					/LookupName		"The.List.With.Dots/The:Slot:With:Indexes/hsr.loc"
					/Delim			"/"
					/IndexDelim		"#"
				}
			}
			/Expected	"Winner"
		}
		{
			/Env {
				/"The.List.With.Dots"	{
					/"The:Slot:With:Indexes" {
						/"hsr.loc" 	Looser
						/"etoys.com"	Winner
					}
				}
			}
			/Renderer {
				/ContextLookupRenderer	{
					/LookupName		"The.List.With.Dots#0#1"
					/Delim			"/"
					/IndexDelim		"#"
				}
			}
			/Expected	"Winner"
		}
		{
			/Env {
				/"The.List.With.Dots"	{
					/"The:Slot:With:Indexes" {
						/"hsr.loc" 	Looser
						/"etoys.com"	Winner
					}
				}
			}
			/Renderer {
				/ContextLookupRenderer	{ "The.List.With.Dots#0#1" "" "/" "#" }
			}
			/Expected	"Winner"
		}
		{
			/Renderer {
				/FloorRenderer	{
					/ListName    RoundClosures
					/Key		"200002041359"
				}
			}
			/Expected	2
		}
		{
			/Renderer {
				/FloorRenderer	{
					/ListName    RoundClosures
					/Key		"200002041400"
				}
			}
			/Expected	3
		}
		{
			/Renderer {
				/FloorRenderer	{
					/ListName    RoundClosures
					/Key		"200002041401"
				}
			}
			/Expected	3
		}
		{
			/Renderer {
				/FloorRenderer	{
					/ListName    RoundClosures
					/Key		"200001041359"
				}
			}
			/Expected	""
		}
		{
			/Renderer {
				/FloorRenderer	{
					/ListName    RoundClosures
					/Key		"200002021400"
				}
			}
			/Expected	"1"
		}
		{
			/Renderer {
				/FloorRenderer	{
					/ListName    RoundClosures
					/Key		"200003041359"
				}
			}
			/Expected	4
		}
		{
			/Renderer {
				/FloorRenderer	{
					/ListName    RoundClosures
					/Key		"200002051400"
				}
			}
			/Expected	4
		}
		{	# if the List is unsorted - the first that is greater triggers
			# the return of the preceeding
			/Env {
				/Unsorted {
					/Alpha		"A"
					/Beta		"B"
					/Gamma		"C"
					/Delta		"D"
				}
			}
			/Renderer {
				/FloorRenderer	{
					/ListName    Unsorted
					/Key		"Epsilon"
				}
			}
			/Expected	"B"
		}
		# CeilingRenderer
		{
			/Renderer {
				/CeilingRenderer	{
					/ListName    RoundClosures
					/Key		"200002041359"
				}
			}
			/Expected	3
		}
		{
			/Renderer {
				/CeilingRenderer	{
					/ListName    RoundClosures
					/Key		"200002041400"
				}
			}
			/Expected	3
		}
		{
			/Renderer {
				/CeilingRenderer	{
					/ListName    RoundClosures
					/Key		"200002041401"
				}
			}
			/Expected	4
		}
		{
			/Renderer {
				/CeilingRenderer	{
					/ListName    RoundClosures
					/Key		"200001041359"
				}
			}
			/Expected	"1"
		}
		{
			/Renderer {
				/CeilingRenderer	{
					/ListName    RoundClosures
					/Key		"200002021400"
				}
			}
			/Expected	"1"
		}
		{
			/Renderer {
				/CeilingRenderer	{
					/ListName    RoundClosures
					/Key		"200003041359"
				}
			}
			/Expected	""
		}
		{
			/Renderer {
				/CeilingRenderer	{
					/ListName    RoundClosures
					/Key		"200002051400"
				}
			}
			/Expected	4
		}
		{	# if the List is unsorted - the first that is greater is returned
			/TmpStore {
				/Unsorted {
					/Alpha		"A"
					/Beta		"B"
					/Gamma		"C"
					/Delta		"D"
				}
			}
			/Renderer {
				/CeilingRenderer	{
					/ListName    Unsorted
					/Key		"Epsilon"
				}
			}
			/Expected	"C"
		}
		# EscapeRenderer
		{
			/SessionStore {
				/TheString	"Jostein Gaarder: Sophie's World"
			}
			/Renderer {
				/EscapeRenderer {
					/String		{ /ContextLookupRenderer	TheString }
					/EscapeChar	"\\"
					/ToEscape	"':"
				}
			}
			/Expected	"Jostein Gaarder\: Sophie\'s World"
		}
		{
			/Env {
				/"TheString"	"Jostein Gaarder: Sophie's World"
			}
			/Renderer {
				/EscapeRenderer {
					/String		{ /ContextLookupRenderer	"TheString" }
					/EscapeChar	"/"
					/ToEscape	"':"
				}
			}
			/Expected	"Jostein Gaarder/: Sophie/'s World"
		}
		# String is missing
		{
			/Env {
				/TheString	"Jostein Gaarder: Sophie's World"
			}
			/Renderer {
				/EscapeRenderer {
					/EscapeChar	"\\"
					/ToEscape	"':"
				}
			}
			/Expected	""
		}
		# EscapeChar is missing
		{
			/Env {
				/TheString	"Jostein Gaarder: Sophie's World"
			}
			/Renderer {
				/EscapeRenderer {
					/String		{ /ContextLookupRenderer	TheString }
					/ToEscape	"':"
				}
			}
			/Expected	"Jostein Gaarder\: Sophie\'s World"
		}
		# ToEscape is missing
		{
			/Env {
				/TheString	"Jostein Gaarder: Sophie's World"
			}
			/Renderer {
				/EscapeRenderer {
					/String		{ /ContextLookupRenderer	TheString }
					/EscapeChar	"\\"
				}
			}
			/Expected	"Jostein Gaarder: Sophie's World"
		}
		# EscapeChar is empty
		{
			/Env {
				/TheString	"Jostein Gaarder: Sophie's World"
			}
			/Renderer {
				/EscapeRenderer {
					/String		{ /ContextLookupRenderer	TheString }
					/ToEscape	"':"
					/EscapeChar	""
				}
			}
			/Expected	"Jostein Gaarder\: Sophie\'s World"
		}
		# ToEscape is empty
		{
			/Env {
				/TheString	"Jostein Gaarder: Sophie's World"
			}
			/Renderer {
				/EscapeRenderer {
					/String		{ /ContextLookupRenderer	TheString }
					/ToEscape	""
					/EscapeChar	"\\"
				}
			}
			/Expected	"Jostein Gaarder: Sophie's World"
		}
		# ContainsRenderer
		{
			/Env {
				/WhichList	TheList
				/WhichValue	"123"
				/TheList {
					"AB"
					"123"
					"CD"
					"456"
				}
				/Found		True
				/NotFound	False
			}
			/Renderer {
				{ /ContainsRenderer {	# Results "Yes"
					/ListName		{ /ContextLookupRenderer	WhichList }
					/ValueToCheck	{ /ContextLookupRenderer	WhichValue }
					/True	"Yes"
					/False	"No"
				} }
				{ /ContainsRenderer {	# Results "Yes"
					/ListName		{ /ContextLookupRenderer	WhichList }
					/ValueToCheck	123
					/True	"Yes"
					/False	"No"
				} }
				{ /ContainsRenderer {	# Results "False"
					/ListName		TheList
					/ValueToCheck	"BC"
					/True	{ /ContextLookupRenderer	Found }
					/False	{ /ContextLookupRenderer	NotFound }
				} }
				{ /ContainsRenderer {	# Results ""
					/ListName		TheList
					/ValueToCheck	"456"
				} }
				{ /ContainsRenderer {	# Results ""
					/ListName		TheList
					/ValueToCheck	"4567"
				} }
				{ /ContainsRenderer {	# Results "No"
					/ListName		TheList
					/True	"Yes"
					/False	"No"
				} }
				{ /ContainsRenderer {	# Results "No"
					/ValueToCheck	"AB"
					/True	"Yes"
					/False	"No"
				} }
				{ /ContainsRenderer {	# Results ""
					/ValueToCheck	"AB"
				} }
				{ /ContainsRenderer {	# Results ""
					/ListName		TheList
				} }
			}
			/Expected	"YesYesFalseNoNo"
		}
		/ListRendererTest1 {
			/Env {
				/TheList	{
					/Slot1	{
						/Name		"A"
						/Ort		"B"
					}
					/Slot2	{
						/Name		"C"
						/Ort		"D"
					}
					/Slot3	{
						/Name		"E"
						/Ort		"F"
					}
				}
			}
			/Renderer {
				/ListRenderer	{
					/ListName    TheList
					/ListHeader    "<"
					/ListFooter		">"
					/EntryHeader	{ /ContextLookupRenderer SlotName }
					/EntryFooter	{ /ContextLookupRenderer Index }
					/EntryStore		Record
					/EntryRenderer    {
						{ /ContextLookupRenderer   Record.Name }
						{ /ContextLookupRenderer   Record.Ort }
					}
					/IndexSlot		Index
					/SlotnameSlot	SlotName
				}
			}
			/Expected	"<Slot1AB0Slot2CD1Slot3EF2>"
		}
		/ListRendererTest2 {
			/Env {
				/TheList	{
					/Slot1	{
						/Name		"A"
						/Ort		"B"
					}
					/Slot2	{
						/Name		"C"
						/Ort		"D"
					}
					/Slot3	{
						/Name		"E"
						/Ort		"F"
					}
					/Slot4	{
						/Name		"G"
						/Ort		"H"
					}
				}
			}
			/Renderer {
				/ListRenderer	{
					/ListName    TheList
					/ListHeader    "<"
					/ListFooter		">"
					/EntryHeaders	{
						{ "<" { /ContextLookupRenderer SlotName } ">"}
						{ "{" { /ContextLookupRenderer SlotName } "}" }
					}
					/EntryFooter	{ /ContextLookupRenderer Index }
					/EntryStore		Record
					/EntryRenderer    {
						{ /ContextLookupRenderer   Record.Name }
						{ /ContextLookupRenderer   Record.Ort }
					}
					/IndexSlot		Index
					/SlotnameSlot	SlotName
				}
			}
			/Expected	"<<Slot1>AB0{Slot2}CD1<Slot3>EF2{Slot4}GH3>"
		}
		/ListRendererTest3 {
			/Env {
				/TheList	{ 0 1 2 3 4 5 6 7 8 9 10 }
			}
			/Renderer {
				/ListRenderer	{
					/Start 3
					/End 6
					/ListName    TheList
					/EntryRenderer	{ /ContextLookupRenderer EntryData }
				}
			}
			/Expected	"3456"
		}
		/ListRendererTest4 {
			/Env {
				/TheList	{ 0 1 2 3 4 5 6 7 8 9 10 }
				/Three 3
				/Six 6
			}
			/Renderer {
				/ListRenderer	{
					/Start	{ /ContextLookupRenderer Three }
					/End 	{ /ContextLookupRenderer Six }
					/ListName    TheList
					/EntryRenderer	{ /ContextLookupRenderer EntryData }
				}
			}
			/Expected	"3456"
		}
		/ListRendererTest5 {
			/Env {
				/TheList	{ 0 1 2 3 4 5 6 7 8 9 10 }
			}
			/Renderer {
				/ListRenderer	{
					/Start 0
					/End 6
					/ListName    TheList
					/EntryRenderer	{ /ContextLookupRenderer EntryData }
				}
			}
			/Expected	"0123456"
		}
		/ListRendererTest6 {
			/Env {
				/TheList	{ 0 1 2 3 4 5 6 7 8 9 10 }
			}
			/Renderer {
				/ListRenderer	{
					/Start -5
					/End 6
					/ListName    TheList
					/EntryRenderer	{ /ContextLookupRenderer EntryData }
				}
			}
			/Expected	"0123456"
		}
		/ListRendererTest7 {
			/Env {
				/TheList	{ 0 1 2 3 4 5 6 7 8 9 10 }
			}
			/Renderer {
				/ListRenderer	{
					/Start 6
					/End 10
					/ListName    TheList
					/EntryRenderer	{ /ContextLookupRenderer EntryData }
				}
			}
			/Expected	"678910"
		}
		/ListRendererTest8 {
			/Env {
				/TheList	{ 0 1 2 3 4 5 6 7 8 9 10 }
			}
			/Renderer {
				/ListRenderer	{
					/Start 6
					/End 12
					/ListName    TheList
					/IndexSlot	Index
					/EntryRenderer	{ /ContextLookupRenderer Index }
				}
			}
			/Expected	"01234"
		}
		/ListRendererTest9 {
			/Env {
				/TheList	{ 0 1 2 3 4 5 6 7 8 9 10 }
			}
			/Renderer {
				/ListRenderer	{
					/Start 6
					/End 6
					/ListName    TheList
					/EntryRenderer	{ /ContextLookupRenderer EntryData }
				}
			}
			/Expected	"6"
		}
		/ListRendererTest10 {
			/Env {
				/TheList	{ 0 1 2 3 4 5 6 7 8 9 10 }
			}
			/Renderer {
				/ListRenderer	{
					/Start 6
					/ListName    TheList
					/EntryRenderer	{ /ContextLookupRenderer EntryData }
				}
			}
			/Expected	"678910"
		}
		/ListRendererTest11 {
			/Env {
				/TheList	{ 0 1 2 3 4 5 6 7 8 9 10 }
			}
			/Renderer {
				/ListRenderer	{
					/End 6
					/ListName    TheList
					/EntryRenderer	{ /ContextLookupRenderer EntryData }
				}
			}
			/Expected	"0123456"
		}
		/ListRendererTest12 {
			/Env {
				/TheList	{ 0 1 2 3 4 5 6 7 8 9 10 }
			}
			/Renderer {
				/ListRenderer	{
					/ListName    TheList
					/EntryRenderer	{ /ContextLookupRenderer EntryData }
				}
			}
			/Expected	"012345678910"
		}
		/ListRendererTest13 {
			/Env {
				/TheList	{ 0 1 2 3 4 5 6 7 8 9 10 }
			}
			/Renderer {
				/ListRenderer	{
					/Start 6
					/End 3
					/ListName    TheList
					/EntryRenderer	{ /ContextLookupRenderer EntryData }
				}
			}
			/Expected	""
		}
		/ListRendererTest14 {
			/Env {
				/TheList	{ 0 1 2 3 4 5 6 7 8 9 10 }
			}
			/Renderer {
				/ListRenderer	{
					/Start -6
					/End -3
					/ListName    TheList
					/EntryRenderer	{ /ContextLookupRenderer EntryData }
				}
			}
			/Expected	""
		}
		/ListRendererTest15 {
			/Env {
				/TheList	{ 0 1 2 3 4 5 6 7 8 9 10 }
			}
			/Renderer {
				/ListRenderer	{
					/Start -3
					/End -6
					/ListName    TheList
					/EntryRenderer	{ /ContextLookupRenderer EntryData }
				}
			}
			/Expected	""
		}
		/ListRendererTest16 {
			/Env {
				/TheList	{ 0 1 2 3 4 5 6 7 8 9 10 }
			}
			/Renderer {
				/ListRenderer	{
					/End -6
					/ListName    TheList
					/EntryRenderer	{ /ContextLookupRenderer EntryData }
				}
			}
			/Expected	""
		}
		/ListRendererTest17 {
			/Env {
				/TheList	{ 0 1 2 3  }
			}
			/Renderer {
				/ListRenderer	{
					/Start 5
					/End 6
					/ListName    TheList
					/EntryRenderer	{ /ContextLookupRenderer EntryData }
				}
			}
			/Expected	""
		}
		/ListRendererTest18 {
			/Env {
				/TheList	{   }
			}
			/Renderer {
				/ListRenderer	{
					/Start 0
					/End 6
					/ListName    TheList
					/IndexSlot Index
					/EntryRenderer	{ /ContextLookupRenderer Index }
				}
			}
			/Expected	""
		}
		/ListRendererTest19 { # Full ListRenderer config
			/Env {
				/TheList {
					/"A"  1
					/"B"  2
					/"C"  3
					/"D"  4
					/"E"  5
					/"F"  6
					/"G"  7
					/"H"  8
					/"I"  9
					/"J"  10
				}
			}
			/Renderer {
				/ListRenderer	{
					/Start 0
					/End 9
					/ListName    TheList
					/ListHeader    "<"
					/ListFooter		">"
					/EntryHeader	"["
					/EHStartingEntry 2
					/EHEveryXEntries 2
					/EntryFooter	"]"
					/EFStartingEntry 2
					/EFEveryXEntries 4
					/EFSuppressLast		1
					/EntryStore		Record
					/SlotnameSlot   Slotname
					/IndexSlot		Index
					/EntryRenderer    {
						{ /ContextLookupRenderer   Slotname }
						{ /ContextLookupRenderer   Index } ":"
						{ /ContextLookupRenderer   Record }
					}
				}
			}
			/Expected	"<A0:1[B1:2]C2:3[D3:4E4:5[F5:6]G6:7[H7:8I8:9[J9:10>"
		}
		/ListRendererTest20 {
			/Env {
				/TheList	{ 1 2 3 4 5 6 7 8 9 10 }
			}
			/Renderer {
				/ListRenderer	{
					/ListName    TheList
					/ListHeader    "<"
					/ListFooter		">"
					/EntryHeader	"["
					/EHStartingEntry 2
					/EHEveryXEntries 2
					/EntryFooter	"]"
					/EFStartingEntry 2
					/EFEveryXEntries 4
					/EFSuppressLast		1
					/EntryStore		Record
					/EntryRenderer    {
						{ /ContextLookupRenderer   Record }
					}
				}
			}
			/Expected	"<1[2]3[45[6]7[89[10>"
		}
		/ListRendererTest21 {
			/Env {
			}
			/Renderer {
				/ListRenderer	{
					/ListData {
						1 2 3 4 5 6 7 8 9 10
					}
					/ListHeader    "<"
					/ListFooter		">"
					/EntryHeader	"["
					/EHStartingEntry 2
					/EHEveryXEntries 2
					/EntryFooter	"]"
					/EFStartingEntry 2
					/EFEveryXEntries 4
					/EFSuppressLast		1
					/EntryStore		Record
					/EntryRenderer    {
						{ /ContextLookupRenderer   Record }
					}
				}
			}
			/Expected	"<1[2]3[45[6]7[89[10>"
		}
		/SelBoxTest1 {
			/Env	{
				/ListBoxList	{
					/A { /Name AName  /Key	A }
					/B { /Name BName  /Key	AB }
					/C { /Name CName  /Key	C }
					/D { /Name DName  /Key	D }
				}
				/True 	1
				/False 	0
				/SelectedOption	2
			}
			/Renderer {
				/SelectBoxRenderer {
					/Name	 "TestList"
					/Size   2      #optional (default=1 -> pulldown menu)
					/ListName		ListBoxList
					/TextRenderer	{
						{ /ContextLookupRenderer	SelectBoxOption.Name }
						"-"
						{ /ContextLookupRenderer	SelectBoxOption.Key }
					}
					/ValueRenderer	{ /ContextLookupRenderer 	SelectBoxOptionSlotname }
					/SelectedRenderer {
						/StringCompareRenderer {
							/String1	{ /ContextLookupRenderer SelectBoxOptionIndex }
							/String2	{ /ContextLookupRenderer SelectedOption }
							/Equal		True
							/Unequal	False
						}
					}
				}
			}
			/Expected	"<select name=\"fld_TestList\" size=\"2\">\n<option value=\"A\">AName-A</option>\n<option value=\"B\">BName-AB</option>\n<option value=\"C\" selected>CName-C</option>\n<option value=\"D\">DName-D</option>\n</select>\n"
		}
		/SelBoxTest2 {
			/Env	{
				/ListBoxList	{
					/A { /Name AName  /Key	A }
					/B { /Name BName  /Key	AB }
					/C { /Name CName  /Key	C }
					/D { /Name DName  /Key	D }
				}
				/PrependListName {
					/P1	{ /Name P1Name /Key P1 }
					/P2	{ /Name P2Name /Key P2 }
				}
				/AppendListName {
					/A1	{ /Name A1Name /Key A1 }
					/A2	{ /Name A2Name /Key A2 }
				}
				/True 	1
				/False 	0
				/SelectedOption	2
			}
			/Renderer {
				/SelectBoxRenderer {
					/Name	 "TestList"
					/Size   2      #optional (default=1 -> pulldown menu)
					/ListName		ListBoxList
					/PrependListName	PrependListName
					/AppendListName		AppendListName
					/TextRenderer	{
						{ /ContextLookupRenderer	SelectBoxOption.Name }
						"-"
						{ /ContextLookupRenderer	SelectBoxOption.Key }
					}
					/ValueRenderer	{ /ContextLookupRenderer 	SelectBoxOptionSlotname }
					/SelectedRenderer {
						/StringCompareRenderer {
							/String1	{ /ContextLookupRenderer SelectBoxOptionIndex }
							/String2	{ /ContextLookupRenderer SelectedOption }
							/Equal		True
							/Unequal	False
						}
					}
				}
			}
			/Expected	"<select name=\"fld_TestList\" size=\"2\">\n<option value=\"P1\">P1Name-P1</option>\n<option value=\"P2\">P2Name-P2</option>\n<option value=\"A\">AName-A</option>\n<option value=\"B\">BName-AB</option>\n<option value=\"C\" selected>CName-C</option>\n<option value=\"D\">DName-D</option>\n<option value=\"A1\">A1Name-A1</option>\n<option value=\"A2\">A2Name-A2</option>\n</select>\n"
		}
		/SelBoxTest3 {
			/Env	{
				/ListBoxList	{
					/A { /Name AName  /Key	A }
					/B { /Name BName  /Key	AB }
					/C { /Name CName  /Key	C }
					/D { /Name DName  /Key	D }
				}
				/True 	1
				/False 	0
				/SelectedOption	2
				/Size	4
			}
			/Renderer {
				/SelectBoxRenderer {
					/Name	 "TestList"
					/Size   { /Lookup Size }
					/ListName		ListBoxList
					/TextRenderer	{
						{ /ContextLookupRenderer	SelectBoxOption.Name }
						"-"
						{ /ContextLookupRenderer	SelectBoxOption.Key }
					}
					/ValueRenderer	{ /ContextLookupRenderer 	SelectBoxOptionSlotname }
					/SelectedRenderer {
						/StringCompareRenderer {
							/String1	{ /ContextLookupRenderer SelectBoxOptionIndex }
							/String2	{ /ContextLookupRenderer SelectedOption }
							/Equal		True
							/Unequal	False
						}
					}
				}
			}
			/Expected	"<select name=\"fld_TestList\" size=\"4\">\n<option value=\"A\">AName-A</option>\n<option value=\"B\">BName-AB</option>\n<option value=\"C\" selected>CName-C</option>\n<option value=\"D\">DName-D</option>\n</select>\n"
		}
		/SelBoxTest4 {
			/Env	{
				/ListBoxList	{
					/A { /Name AName  /Key	A }
					/B { /Name BName  /Key	AB }
					/C { /Name CName  /Key	C }
					/D { /Name DName  /Key	D }
				}
				/True 	1
				/False 	0
				/SelectedOption	2
				/Size	4
				/Multiple	1
			}
			/Renderer {
				/SelectBoxRenderer {
					/Name	 "TestList"
					/Size   { /Lookup Size }
					/Multiple	{ /Lookup Multiple }
					/ListName		ListBoxList
					/TextRenderer	{
						{ /ContextLookupRenderer	SelectBoxOption.Name }
						"-"
						{ /ContextLookupRenderer	SelectBoxOption.Key }
					}
					/ValueRenderer	{ /ContextLookupRenderer 	SelectBoxOptionSlotname }
					/SelectedRenderer {
						/StringCompareRenderer {
							/String1	{ /ContextLookupRenderer SelectBoxOptionIndex }
							/String2	{ /ContextLookupRenderer SelectedOption }
							/Equal		True
							/Unequal	False
						}
					}
				}
			}
			/Expected	"<select name=\"fld_TestList\" size=\"4\" multiple>\n<option value=\"A\">AName-A</option>\n<option value=\"B\">BName-AB</option>\n<option value=\"C\" selected>CName-C</option>\n<option value=\"D\">DName-D</option>\n</select>\n"
		}
		/SelBoxTest5 {
			/Env	{
				/ListBoxList	{
					/A { /Name AName  /Key	A }
					/B { /Name BName  /Key	AB }
					/C { /Name CName  /Key	C }
					/D { /Name DName  /Key	D }
				}
				/True 	1
				/False 	0
				/SelectedOption	2
				/Size	4
				/Multiple	0
			}
			/Renderer {
				/SelectBoxRenderer {
					/Name	 "TestList"
					/Size   { /Lookup Size }
					/Multiple	{ /Lookup Multiple }
					/ListName		ListBoxList
					/TextRenderer	{
						{ /ContextLookupRenderer	SelectBoxOption.Name }
						"-"
						{ /ContextLookupRenderer	SelectBoxOption.Key }
					}
					/ValueRenderer	{ /ContextLookupRenderer 	SelectBoxOptionSlotname }
					/SelectedRenderer {
						/StringCompareRenderer {
							/String1	{ /ContextLookupRenderer SelectBoxOptionIndex }
							/String2	{ /ContextLookupRenderer SelectedOption }
							/Equal		True
							/Unequal	False
						}
					}
				}
			}
			/Expected	"<select name=\"fld_TestList\" size=\"4\">\n<option value=\"A\">AName-A</option>\n<option value=\"B\">BName-AB</option>\n<option value=\"C\" selected>CName-C</option>\n<option value=\"D\">DName-D</option>\n</select>\n"
		}
		/SelBoxTest6 {
			/Env	{
				/ListBoxList	{
					/A { /Name AName  /Key	A }
					/B { /Name BName  /Key	AB }
					/C { /Name CName  /Key	C }
					/D { /Name DName  /Key	D }
				}
				/True 	1
				/False 	0
				/SelectedOption	2
				/Size	4
			}
			/Renderer {
				/SelectBoxRenderer {
					/Name	 "TestList"
					/Size   { /Lookup Size }
					/Multiple	{ /Lookup Multiple }
					/ListName		ListBoxList
					/TextRenderer	{
						{ /ContextLookupRenderer	SelectBoxOption.Name }
						"-"
						{ /ContextLookupRenderer	SelectBoxOption.Key }
					}
					/ValueRenderer	{ /ContextLookupRenderer 	SelectBoxOptionSlotname }
					/SelectedRenderer {
						/StringCompareRenderer {
							/String1	{ /ContextLookupRenderer SelectBoxOptionIndex }
							/String2	{ /ContextLookupRenderer SelectedOption }
							/Equal		True
							/Unequal	False
						}
					}
				}
			}
			/Expected	"<select name=\"fld_TestList\" size=\"4\">\n<option value=\"A\">AName-A</option>\n<option value=\"B\">BName-AB</option>\n<option value=\"C\" selected>CName-C</option>\n<option value=\"D\">DName-D</option>\n</select>\n"
		}
		/SelBoxTest7 {
			/Env {
				/OptGroupRenderTstListe01 {
					"65_7_1"
					"65_12_1"
					"66_1_1"
					"66_7_1"
					"66_12_1"
				}
			}
			/Renderer {
				/SelectBoxRenderer {
					/Name 		"MyTest01"
					/Size		15
					/ListName  OptGroupRenderTstListe01
					/ValueRenderer { /Lookup  SelectBoxOption }
					/TextRenderer  { /Lookup  SelectBoxOption }
					/OptionGroup {
						/KeyRenderer {
							/StringTokenizeRenderer {
								/String			{ /Lookup SelectBoxOption }
								/Token			"_"
								/RenderToken	1
							}
						}
						/LabelRenderer {
							/StringTokenizeRenderer {
								/String			{ /Lookup SelectBoxOption }
								/Token			"_"
								/RenderToken	1
							}
						}
					}
				}
			}
			/Expected "<select name=\"fld_MyTest01\" size=\"15\">\n<optgroup label='65'>\n<option value=\"65_7_1\">65_7_1</option>\n<option value=\"65_12_1\">65_12_1</option>\n</optgroup>\n<optgroup label='66'>\n<option value=\"66_1_1\">66_1_1</option>\n<option value=\"66_7_1\">66_7_1</option>\n<option value=\"66_12_1\">66_12_1</option>\n</optgroup>\n</select>\n"

		}
		/SelBoxTest8 {
			/Env {
				/OptGroupRenderTstListe02 {
					"65_7_1"
					"65_7_2"
					"66_1_3"
					"66_1_4"
					"66_1_5"
				}
			}
			/Renderer {
				/SelectBoxRenderer {
					/Name 		"MyTest02"
					/Size		15
					/ListName  OptGroupRenderTstListe02
					/ValueRenderer { /Lookup  SelectBoxOption }
					/TextRenderer  { /Lookup  SelectBoxOption }
					/OptionGroup {
						/KeyRenderer {
							/StringTokenizeRenderer {
								/String			{ /Lookup SelectBoxOption }
								/Token			"_"
								/RenderToken	2
							}
						}
						/LabelRenderer {
							/StringTokenizeRenderer {
								/String			{ /Lookup SelectBoxOption }
								/Token			"_"
								/RenderToken	2
							}
						}
					}
				}
			}
			/Expected "<select name=\"fld_MyTest02\" size=\"15\">\n<optgroup label='7'>\n<option value=\"65_7_1\">65_7_1</option>\n<option value=\"65_7_2\">65_7_2</option>\n</optgroup>\n<optgroup label='1'>\n<option value=\"66_1_3\">66_1_3</option>\n<option value=\"66_1_4\">66_1_4</option>\n<option value=\"66_1_5\">66_1_5</option>\n</optgroup>\n</select>\n"
		}
		/SelBoxTest9 {
			/Env {
				/LabelreferenzListe {
					/65 "BC65"
					/66 "BC66"
				}
				/OptGroupRenderTstListe03 {
					"65_7_1"
					"66_1_3"
				}
			}
			/Renderer {
				/SelectBoxRenderer {
					/Name 		"MyTest03"
					/Size		15
					/ListName  OptGroupRenderTstListe03
					/ValueRenderer { /Lookup  SelectBoxOption }
					/TextRenderer  { /Lookup  SelectBoxOption }
					/OptionGroup {
						/KeyRenderer {
							/StringTokenizeRenderer {
								/String			{ /Lookup SelectBoxOption }
								/Token			"_"
								/RenderToken	1
							}
						}
						/LabelRenderer {
							/StringTokenizeRenderer {
								/String			{ /Lookup SelectBoxOption }
								/Token			"_"
								/RenderToken	1
							}
							" - "
							/Lookup {
								{
									LabelreferenzListe.
									/StringTokenizeRenderer {
										/String			{ /Lookup SelectBoxOption }
										/Token			"_"
										/RenderToken	1
									}
								}
							}
						}
					}
				}
			}
			/Expected "<select name=\"fld_MyTest03\" size=\"15\">\n<optgroup label='65 - BC65'>\n<option value=\"65_7_1\">65_7_1</option>\n</optgroup>\n<optgroup label='66 - BC66'>\n<option value=\"66_1_3\">66_1_3</option>\n</optgroup>\n</select>\n"
		}
		{
			/Renderer	{
				/ContextLookupRenderer	TestDomain
			}
			/Expected	"hsr.loc"
		}
		{
			/Env {
			}
			/Renderer	{
				/TextFieldRenderer {
					/Name		Gugus
					/Value		gaga
					/Size		5
					/Maxlength	6
					/Options {
						/class	Hallo
					}
				}
			}
			/Expected	"<INPUT TYPE=\"TEXT\" NAME=\"fld_Gugus\" VALUE=\"gaga\" SIZE=\"5\" MAXLENGTH=\"6\" class=\"Hallo\">"
		}
		{
			/Env {
				/Name	Gugus
			}
			/Renderer	{
				/TextFieldRenderer {
					/Name		{ /Lookup Name }
					/Value		*
					/Size		5
					/Maxlength	6
					/Options {
						/class	Hallo
					}
				}
			}
			/Expected	"<INPUT TYPE=\"TEXT\" NAME=\"fld_Gugus\" SIZE=\"5\" MAXLENGTH=\"6\" class=\"Hallo\">"
		}
		{
			/Env {
				/RadioOn	"Hallo"
			}
			/Renderer {
				/RadioButtonRenderer	{
					/Name   "x1"
					/Value	"pos2"
					/EvaluateChecked 	{
						/ConditionalRenderer {
							/ContextCondition  RadioOn 		# initially set button
							/Defined	1					# because RadioOn is defined in
							/Undefined	0					# the Context
						}
					}
				}
			}
			/Expected	"<INPUT TYPE=\"RADIO\" NAME=\"fld_x1\" VALUE=\"pos2\" CHECKED>"
		}
		{
			/Env {
				/RadioOff	"Hallo"
			}
			/Renderer {
				/RadioButtonRenderer	{
					/Name   "x1"
					/Value	"pos2"
					/EvaluateChecked 	{
						/ConditionalRenderer {
							/ContextCondition  RadioOn 		# initially button not set
							/Defined	1					# because RadioOn is not defined in
							/Undefined	0					# the Context
						}
					}
				}
			}
			/Expected	"<INPUT TYPE=\"RADIO\" NAME=\"fld_x1\" VALUE=\"pos2\">"
		}
		{	# NavBarRenderer
			/Env {
				/FirstEntry_L	"1. Menupunkt"
				/SecondEntry_L	"2. Menupunkt"
				/Nav1	Second
				/Nav2	SecondsSecondChild
				/NavBarInfo  {
					/ActualStore	Nav1
					/Entries {
						{
							/Name		First		# Name is compared against ActaulStore content (here Nav1)
							/Text		{ /ContextLookupRenderer    FirstEntry_L }
							/Childs		{
								/ActualStore	Nav2
								/Entries {
									{
										/Name		FirstsFirstChild	# Name is compared against ActaulStore content (here Nav2)
										/Text		"1.1. Menupunkt"
									}
									{
										/Name		FirstsSecondChild
										/Text		"1.2. Menupunkt"
									}
								}
							}
						}
						{
							/Name		Second			# Name is compared against ActaulStore content (here Nav1)
							/Text		{ /ContextLookupRenderer   SecondEntry_L  }
							/Renderer	{
								/Selected	{
									"<OwnS>"
									{ /ContextLookupRenderer	NavEntry.Name }
									"</OwnS>"
								}
							}
							/Childs		{
								/ActualStore	Nav2
								/Entries {
									{
										/Name		SecondsFirstChild	# Name is compared against ActaulStore content (here Nav2)
										/Text		"2.1. Menupunkt"
										/Renderer	{
											/Unselected	{
												"<OwnUS>"
												{ /ContextLookupRenderer	NavEntry.Name }
												"</OwnUS>"
											}
										}
									}
									{
										/Name		SecondsSecondChild
										/Text		"2.2. Menupunkt"
									}
									{
										/Name		SecondsThirdChild
										/Text		"2.3. Menupunkt"
										/Disabled	1
									}
								}
							}
						}
					}
				}
			}
			/Renderer {
				/NavBarRenderer {
					/Info		NavBarInfo
					/LevelHeader		"<LEVELStart>"
					/LevelFooter		"<LEVELEnd>"
					/EntryStore			NavEntry
					/Selected			{
						"<S>"
						{ /ContextLookupRenderer	NavEntry.Text }
						"</S>"
					}
					/Unselected			{
						"<US>"
						{ /ContextLookupRenderer	NavEntry.Text }
						"</US>"
					}
					/Disabled			{
						"<D>"
						{ /ContextLookupRenderer	NavEntry.Text }
						"</D>"
					}
				}
			}
			/Expected	"<LEVELStart><US>1. Menupunkt</US><OwnS>Second</OwnS><LEVELEnd><LEVELStart><OwnUS>SecondsFirstChild</OwnUS><S>2.2. Menupunkt</S><D>2.3. Menupunkt</D><LEVELEnd>"
		}
		{
			/Env {
				/UseBaseURL		1
				/BaseAddress 	"http://sentosa.hsr.loc:1919/"
			}
			/Renderer {
				/BaseURLPrinter *
			}
			/Expected	"http://sentosa.hsr.loc:1919/wdgateway/X1=Encoder-Scrambler-Signer-Compressor-%7B%2Frole%20%22TestRole%22%2FsessionId%20%22TestSession%22%2Fpage%20%22TestPage%22%7D/"
		}
		{
			/Env {
				/UseBaseURL		1
				/BaseAddress {
					/ConditionalRenderer {
						/ContextCondition { IsSecure }
						/True 	{ /Lookup SecureBaseAddress		}
						/False 	{ /Lookup UnsecureBaseAddress	}
					}
				}
				/HostName				"sentosa.hsr.loc"
				/Port					1919
				/SecurePort				2020
				/Protocol				http
				/SecureProtocol			https

				/IsSecure				0
				/UnsecureBaseAddress 	{ {/Lookup Protocol} "://" {/Lookup HostName} ":" {/Lookup Port} "/" }
				/SecureBaseAddress		{ {/Lookup SecureProtocol} "://" {/Lookup HostName} ":" {/Lookup SecurePort} "/" }	 # defines literal for the standard BaseAddress

			}
			/Renderer {
				/BaseURLPrinter *
			}
			/Expected	"http://sentosa.hsr.loc:1919/wdgateway/X1=Encoder-Scrambler-Signer-Compressor-%7B%2Frole%20%22TestRole%22%2FsessionId%20%22TestSession%22%2Fpage%20%22TestPage%22%7D/"
		}
		{
			/Renderer {
				/URL {
					/Action	GoTest
					/Params {
						/Name	Test
						/Key	XYZ
					}
				}
			}
			/Expected	"wdgateway?X=Encoder-Scrambler-Signer-Compressor-%7B%2Frole%20%22TestRole%22%2FsessionId%20%22TestSession%22%2Fpage%20%22TestPage%22%2Faction%20%22GoTest%22%2FName%20%22Test%22%2FKey%20%22XYZ%22%7D"
		}
		{
			/Env {
				/UseBaseURL		1
			}
			/Renderer {
				/URL {
					/Action	GoTest
					/Params {
						/Name	Test
						/Key	XYZ
					}
				}
			}
			/Expected	"X2=Encoder-Scrambler-Signer-Compressor-%7B%2Faction%20%22GoTest%22%2FName%20%22Test%22%2FKey%20%22XYZ%22%7D"
		}
		{
			/Env {
				/UseBaseURL		1
				/SecureBaseURL	"https://test.hsr.loc/"
				/ServicePrefix	"testApp"
			}
			/Renderer {
				/URL {
					/BaseAddr	{ /Lookup	SecureBaseURL }
					/Action	GoTest
					/Params {
						/Name	Test
						/Key	XYZ
					}
				}
			}
			/Expected	"https://test.hsr.loc/testApp?X=Encoder-Scrambler-Signer-Compressor-%7B%2Frole%20%22TestRole%22%2FsessionId%20%22TestSession%22%2Fpage%20%22TestPage%22%2Faction%20%22GoTest%22%2FName%20%22Test%22%2FKey%20%22XYZ%22%7D"
		}
		{
			/Env {
				/UseBaseURL		1
				/SecureBaseURL	"https://test.hsr.loc/"
				/ServicePrefix	"testApp"
			}
			/Renderer {
				/LinkRenderer {
					/Label	"Test"
					/BaseAddr	{ /Lookup	SecureBaseURL }
					/Action	GoTest
					/Params {
						/Name	Test
						/Key	XYZ
					}
				}
			}
			/Expected	"<a href=\"https://test.hsr.loc/testApp?X=Encoder-Scrambler-Signer-Compressor-%7B%2Frole%20%22TestRole%22%2FsessionId%20%22TestSession%22%2Fpage%20%22TestPage%22%2Faction%20%22GoTest%22%2FName%20%22Test%22%2FKey%20%22XYZ%22%7D\" >Test</a>"
		}
		{
			/Env {
				/UseBaseURL		1
				/SecureBaseURL	"https://test.hsr.loc/"
				/ServicePrefix	"testApp"
			}
			/Renderer {
				/FormRenderer {
					/Label	"Test"
					/BaseAddr	{ /Lookup	SecureBaseURL }
					/Action	GoTest
					/Params {
						/Name	Test
						/Key	XYZ
					}
					/Layout	"NoInput"
				}
			}
			/Expected	"<FORM ACTION=\"https://test.hsr.loc/testApp?X=Encoder-Scrambler-Signer-Compressor-%7B%2Frole%20%22TestRole%22%2FsessionId%20%22TestSession%22%2Fpage%20%22TestPage%22%2Faction%20%22GoTest%22%2FName%20%22Test%22%2FKey%20%22XYZ%22%7D\" METHOD=\"POST\">NoInput</FORM>"
		}
		{
			/Env {
				/TestMe		Hallo
			}
			/Renderer {
				/HTML {
					/Template	{
						"Test [[#wd Lookup	{ TestMe } ]] "
					}
				}
			}
			/Expected "Test Hallo "
		}
		{ # [[#wd ]] Macro Style uncached (E see below )
			/Env {
				/TestMe		Hallo
			}
			/Renderer {
				/HTML {
					/TemplateName	TemplateTest
				}
			}
			/Expected "Test Hallo "
		}
		{	# [[#wd ]] Macro Style cached (D see below )
			/Env {
				/TestMe		Hallo
				/Language	"D"
			}
			/Renderer {
				/HTML {
					/TemplateName	TemplateTest
				}
			}
			/Expected "Test Hallo "
		}

		#--- ATTENTION!!! changed HTMLTemplateRenderer comment syntax ATTENTION!!! ----
		{
			/Env {
				/TestMe		Hallo
			}
			/Renderer {
				/HTML {
					/Template	{
						"TestTemplate <!--#Lookup {TestMe} ---><!--#Lookup {TestMe} -->"
					}
				}
			}
			/Expected "TestTemplate <!--#Lookup {TestMe} ---><!--#Lookup {TestMe} -->"
		}
		{
			/Env {
				/TestMe		Hallo
				/"Test--Me" Ende
			}
			/Renderer {
				/HTML {
					/Template	{
						"TestTemplate <!--#wd Lookup {TestMe} ---> <!--#BeginLibraryItem -- notOurBeer ----> <!--#wd Lookup { { \"Test--Me\" } } -->"
					}
				}
			}
			/Expected "TestTemplate Hallo <!--#BeginLibraryItem -- notOurBeer ----> Ende"
		}
		{
			/Env {
				/TestMe		Hallo
				/"Test--Me" Ende
			}
			/Renderer {
				/HTML {
					/Template	{
						"TestTemplate <!--#wd Lookup {TestMe} ---> <!--#BeginLibraryItem -- notOurBeer ----> <!--#wd Lookup { { \"Test\" --  Me } } -->"
					}
				}
			}
			/Expected "TestTemplate Hallo <!--#BeginLibraryItem -- notOurBeer ----> Ende"
		}
		{ # This tests does use a cached page -- because the Language is set to "D" and D is defined in LanguageDirMap in Config.any
			/Env {
				/TestMe		Hallo
				/Language 	"D"
			}
			/Renderer {
				/HTML {
					/TemplateName TemplateCommentTest
				}
			}
			/Expected "TestTemplateFile Hallo <!--#BeginLibraryItem notOurBeer -->"
		}
		{ # This tests doesn't use a cached page -- because the Language is set to "E" (Default in TestCase) and E is not defined in LanguageDirMap in Config.any'
			/Env {
				/TestMe		Hallo
			}
			/Renderer {
				/HTML {
					/TemplateName TemplateCommentTest
				}
			}
			/Expected "TestTemplateFile Hallo <!--#BeginLibraryItem notOurBeer -->"
		}
#--- Test Template with Localized Lookup
		/TemplateLocalizedTestDefault { # [[#wd ]] Macro Style uncached (E see below )
			/Env {
				/TestMe		Hallo
				/Language "D"
			}
			/Renderer {
				/HTML {
					/TemplateName	TemplateLocalizedTest
				}
			}
			/Expected "Test Localized Test in deutsch done<!-- not cached -->\n"
		}
		/TemplateLocalizedTestGerman {	# [[#wd ]] Macro Style cached (D see below )
			/Env {
				/TestMe		Hallo
				/Language	"E"
			}
			/Renderer {
				/HTML {
					/TemplateName	TemplateLocalizedTest
				}
			}
			/Expected "Test Localized Testing done<!-- not cached -->\n"
		}

#--- Form Renderer Tests
		{ # Form Renderer Method GET
			/Renderer {
				/Form {
					/Action { Te st }
					/Method { G E T }
					/EncType  "multipart/form-data"
					/Target   "_blank"
					/Options  {
						/Name  { Test Form }
					}
					/Params {
						/TestId	{ Te st }
					}
					/Layout { TEST }
				}
			}
			/Expected "<FORM ACTION=\"wdgateway?X=Encoder-Scrambler-Signer-Compressor-%7B%2Frole%20%22TestRole%22%2FsessionId%20%22TestSession%22%2Fpage%20%22TestPage%22%2Faction%20%22Test%22%2FTestId%20%22Test%22%7D\" METHOD=\"GET\" ENCTYPE=\"multipart/form-data\" TARGET=\"_blank\" name=\"TestForm\"><INPUT TYPE=HIDDEN NAME=\"X\" VALUE=\"Encoder-Scrambler-Signer-Compressor-%7B%2Frole%20%22TestRole%22%2FsessionId%20%22TestSession%22%2Fpage%20%22TestPage%22%2Faction%20%22Test%22%2FTestId%20%22Test%22%7D\">TEST</FORM>"
		}
		{ # Form Renderer Method POST
			/Renderer {
				/Form {
					/Action { Te st }
					/Method { PO ST }
					/EncType  "multipart/form-data"
					/Target   "_blank"
					/Options  {
						/Name  { Test Form }
					}
					/Params {
						/TestId	{ Te st }
					}
					/Layout { TEST }
				}
			}
			/Expected "<FORM ACTION=\"wdgateway?X=Encoder-Scrambler-Signer-Compressor-%7B%2Frole%20%22TestRole%22%2FsessionId%20%22TestSession%22%2Fpage%20%22TestPage%22%2Faction%20%22Test%22%2FTestId%20%22Test%22%7D\" METHOD=\"POST\" ENCTYPE=\"multipart/form-data\" TARGET=\"_blank\" name=\"TestForm\">TEST</FORM>"
		}
		{ # Form Renderer Method GET mit Base URL
			/Env {
				/UseBaseURL		1
			}
			/Renderer {
				/Form {
					/Action { Te st }
					/Method { G E T }
					/EncType  "multipart/form-data"
					/Target   "_blank"
					/Options  {
						/Name  { Test Form }
					}
					/Params {
						/TestId	{ Te st }
					}
					/Layout { TEST }
				}
			}
			/Expected "<FORM ACTION=\"X2=Encoder-Scrambler-Signer-Compressor-%7B%2Faction%20%22Test%22%2FTestId%20%22Test%22%7D\" METHOD=\"GET\" ENCTYPE=\"multipart/form-data\" TARGET=\"_blank\" name=\"TestForm\">TEST</FORM>"
		}
		{ # Form Renderer Method POST mit Base URL
			/Env {
				/UseBaseURL		1
			}
			/Renderer {
				/Form {
					/Action { Te st }
					/Method { PO ST }
					/EncType  "multipart/form-data"
					/Target   "_blank"
					/Options  {
						/Name  { Test Form }
					}
					/Params {
						/TestId	{ Te st }
					}
					/Layout { TEST }
				}
			}
			/Expected "<FORM ACTION=\"X2=Encoder-Scrambler-Signer-Compressor-%7B%2Faction%20%22Test%22%2FTestId%20%22Test%22%7D\" METHOD=\"POST\" ENCTYPE=\"multipart/form-data\" TARGET=\"_blank\" name=\"TestForm\">TEST</FORM>"
		}
		{ # Form Renderer minimal config test
			/Renderer {
				/Form {
					/Layout { TEST }
				}
			}
			/Expected "<FORM ACTION=\"wdgateway?X=Encoder-Scrambler-Signer-Compressor-%7B%2Frole%20%22TestRole%22%2FsessionId%20%22TestSession%22%2Fpage%20%22TestPage%22%7D\" METHOD=\"POST\">TEST</FORM>"
		}
		{ # Form Renderer minimal config test with Base URL
			/Env {
				/UseBaseURL		1
			}
			/Renderer {
				/Form {
					/Layout { TEST }
				}
			}
			/Expected "<FORM ACTION=\"X2=Encoder-Scrambler-Signer-Compressor-*\" METHOD=\"POST\">TEST</FORM>"
		}
		/IncrementRendererTest1 { # Increment Renderer test - simple
			/Env {
				/ANumber		99
			}
			/Renderer {
				/Inc {
					/IncValue { /Lookup ANumber }
				}
			}
			/Expected "100"
		}
		/IncrementRendererTest2 { # Increment Renderer test - from minus to zero
			/Env {
				/ANumber		"-1"
			}
			/Renderer {
				/Inc { /Lookup ANumber }
			}
			/Expected "0"
		}
		/IncrementRendererTest3 { # Increment Renderer test - from zero to 0
			/Renderer {
				/Inc 0
			}
			/Expected "1"
		}
		/IncrementRendererTest4 { # Increment Renderer test  - Non numeric values are converted to 0 and incremented to 1
			/Renderer {
				/Inc NotANumber
			}
			/Expected "1"
		}
		/TailRendererTest { #
			/Renderer {
				/Tail {
					/String {
						 "Another-Render-Me " "This"
					}
					/Delim	"-"
				}
			}
			/Expected "Me This"
		}
		/TailRendererDefaultTest { #
			/Renderer {
				/Tail {
					/String {
						 "Another-Render=Me " "This"
					}
				}
			}
			/Expected "Me This"
		}
		/TailRendererNoMatch {
			/Renderer {
				/Tail {
					/String {
						 "Another-Render=Me " "This"
					}
					/Delim "#"
				}
			}
			/Expected "Another-Render=Me This"
		}
		/SetLanguageRendererTest {
			/Env {
				/Language D
				/TheString_L {
					/String {
						/Default "Default,"
						/D	"D,"
						/E	"E,"
						/F  "F,"
					}
				}
				/AnotherLanguage E
			}
			/Renderer {
				{ /Lookup TheString_L }
				{ /SwitchLanguage {
					/TempLang F
					/Content {
						{ /Lookup TheString_L }
					}
				} }
				{ /SwitchLanguage {
					/TempLang I
					/Content {
						{ /Lookup TheString_L }
					}
				} }
				{ /SwitchLanguage {
					/TempLang { /Lookup AnotherLanguage }
					/Content {
						{ /Lookup TheString_L }
					}
				} }
				{ /SwitchLanguage {
					/TempLang "Unknown"
					/Content {
						{ /Lookup TheString_L }
					}
				} }
				{ /Lookup TheString_L }
			}
			/Expected "D,F,Default,E,Default,D,"
		}
		/SubStringRendererNormalTest
		{
			/Env
			{
			}
			/Renderer
			{
				/SubStringRenderer
				{
					/String "foobar"
					/Start	3
					/Length 3
				}
			}
			/Expected	bar
		}
		/SubStringRendererFullTest
		{
			/Env
			{
			}
			/Renderer
			{
				/SubStringRenderer
				{
					/String "foobar"
				}
			}
			/Expected	foobar
		}
		/SubStringRendererLookupTest
		{
			/Env
			{
				/str	foobar
			}
			/Renderer
			{
				/SubStringRenderer
				{
					/String { /Lookup str }
					/Start	3
				}
			}
			/Expected	bar
		}
		/SubStringRendererEmpyTest
		{
			/Env
			{
			}
			/Renderer
			{
				/SubStringRenderer
				{
				}
			}
			/Expected	""
		}
		/SubStringRendererStartTooBigTest
		{
			/Env
			{
			}
			/Renderer
			{
				/SubStringRenderer
				{
					/String "foobar"
					/Start	10
					/Length 3
				}
			}
			/Expected	""
		}
		/SubStringRendererLengthTooBigTest
		{
			/Env
			{
			}
			/Renderer
			{
				/SubStringRenderer
				{
					/String "foobar"
					/Start	3
					/Length 10
				}
			}
			/Expected	"bar"
		}
		/SubStringRendererLookupStartTest
		{
			/Env
			{
				/Start	2
				/Length	3
			}
			/Renderer
			{
				/SubStringRenderer
				{
					/String "foobar"
					/Start	{ /Lookup Start }
					/Length { /Lookup Length }
				}
			}
			/Expected	"oba"
		}
		/FileLoadRendererTest
		{
			/Env
			{
			}
			/Renderer
			{
					/FileLoadRenderer
					{
							/File2Load "foobar"
					}
			}
			/Expected       "FileLoadRenderer: File foobar not found."
		}
		{
				/TmpStore
				{
					/QuietLookupToken "yes"
				}
				/Env
				{
				}
				/Renderer
				{
						/FileLoadRenderer
						{
								/File2Load	"foobar"
								/Quiet		{ /Lookup QuietLookupToken }
						}
				}
				/Expected       ""
		}
		{
				/Env
				{
				}
				/Renderer
				{
						/FileLoadRenderer
						{
						}
				}
				/Expected       "FileLoadRenderer: File2Load Param missing."
		}
		{
				/Env
				{
				}
				/Renderer
				{
						/FileLoadRenderer
						{
							/Quiet		"yes"
						}
				}
				/Expected       ""
		}
		{
				/Env
				{
				}
				/Renderer
				{
						/FileLoadRenderer
						{
								/File2Load "FileLoadRenderer.html"
						}
				}
				/Expected       "foobar,foobar\n"
		}
		{
				/Env
				{
					/FileName	"FileLoadRenderer.html"
				}
				/Renderer
				{
						/FileLoadRenderer
						{
								/File2Load { /Lookup FileName }
						}
				}
				/Expected       "foobar,foobar\n"
		}
		#TestContextFlagRenderer
		{
				/Env
				{
					/AccessRights
					{
						/vdb	1
					}
					/flag	"AccessRights.vdb"
					/alpha	"ALPHA"
					/beta	"BETA"
				}
				/Renderer
				{
						/TestContextFlagRenderer
							{
								/FlagName 	{ /Lookup flag  }
								/WhenSet	{ /Lookup alpha }
								/WhenNotSet	{ /Lookup beta	}
						}
				}
				/Expected       "ALPHA"
		}
		{
				/Env
				{
					/AccessRights
					{
						/vdb	0
					}
					/flag	"AccessRights.vdb"
					/alpha	"ALPHA"
					/beta	"BETA"
				}
				/Renderer
				{
						/TestContextFlagRenderer
							{
								/FlagName 	{ /Lookup flag  }
								/WhenSet	{ /Lookup alpha }
								/WhenNotSet	{ /Lookup beta	}
						}
				}
				/Expected       "BETA"
		}
		{
				/Env
				{
					/AccessRights
					{
						/finxs	1
					}
					/flag	"AccessRights.vdb"
					/alpha	"ALPHA"
					/beta	"BETA"
				}
				/Renderer
				{
						/TestContextFlagRenderer
							{
								/FlagName 	{ /Lookup flag  }
								/WhenSet	{ /Lookup alpha }
								/WhenNotSet	{ /Lookup beta	}
						}
				}
				/Expected       "BETA"
		}
		/HTMLEscapeRendererTest
		{
			/Env
			{
				/foo "<bar>blöd<bar/>"
			}
			/Renderer
			{
				/HTMLEscapeRenderer	{ /Lookup foo }
			}
			/Expected       "&#60;bar&#62;bl&#195;&#182;d&#60;bar&#47;&#62;"
		}
		/GetThisHostNameRendererIPTest
		{
			/Renderer
			{
				/GetThisHostNameRenderer
				{
					/Representation "IPAddress"
				}
			}
			/Expected       !Defaults.any?HostNameIp
		}

		/GetThisHostNameRendererFullTest
		{
			/Renderer
			{
				/GetThisHostNameRenderer
				{
					/Representation "Full"
				}
			}
			/Expected       !Defaults.any?FullQualifiedDomainName

		}
		/GetThisHostNameRendererHostTest
		{
			/Renderer
			{
				/GetThisHostNameRenderer
				{
					/Representation "HostOnly"
				}
			}
			/Expected       !Defaults.any?HostName
		}
		/GetThisHostNameRendererDNSTest
		{
			/Renderer
			{
				/GetThisHostNameRenderer
				{
					/Representation "DomainOnly"
				}
			}
			/Expected       !Defaults.any?DomainName
		}
		/AnythingContentRendererTest
		{
			/Env
			{
				/aAnyThing
				{
					/foo	bar
				}
			}
			/Renderer
			{
				/AnythingContentRenderer
				{
					/Input "aAnyThing"
					/Pretty 0
				}
			}
			/Expected       "{/foo \"bar\"}"
		}
		/AnythingContentRendererWithXMPTest
		{
			/Env
			{
				/aAnyThing
				{
					/foo	bar
				}
			}
			/Renderer
			{
				/AnythingContentRenderer
				{
					/Input		"aAnyThing"
					/Pretty		0
					/XmpTags	{
									/PreTag "<kim>"
									/PostTag "<dojo>"
								}
				}
			}
			/Expected       "<br><pre><kim>{/foo \"bar\"}<dojo></pre><br>"
		}
		/AnythingContentRendererWithStyleTest
		{
			/Env
			{
				/aAnyThing
				{
					/foo	bar
				}
			}
			/Renderer
			{
				/AnythingContentRenderer
				{
					/Input		"aAnyThing"
					/Pretty		0
					/XmpTags	{
									/CSSTag "class=\"ali baba\""
									/PreTag "<kim>"
									/PostTag "<dojo>"
								}
				}
			}
			/Expected       "<br><pre class=\"ali baba\"><kim>{/foo \"bar\"}<dojo></pre><br>"
		}

		/AnythingContentRendererWithXMPNoTagsTest
		{
			/Env
			{
				/aAnyThing
				{
					/foo	bar
				}
			}
			/Renderer
			{
				/AnythingContentRenderer
				{
					/Input		"aAnyThing"
					/Pretty		0
					/XmpTags	""
				}
			}
			/Expected       "<br><pre>{/foo \"bar\"}</pre><br>"
		}
		/StringCompareRendererEqualTest
		{
			/Env
			{
					/StringOne	bar
					/StringTwo  bar
			}
			/Renderer
			{
				/StringCompareRenderer
				{
					/String1	{ /Lookup StringOne }
					/String2	{ /Lookup StringTwo }
					/Equal		"Equal"
					/Unequal	"Unequal"
				}
			}
			/Expected       "Equal"
		}
		/StringCompareRendererEqualCaseInsensitiveTest
		{
			/Env
			{
					/StringOne	BAR
					/StringTwo  bar
			}
			/Renderer
			{
				/StringCompareRenderer
				{
					/String1	{ /Lookup StringOne }
					/String2	{ /Lookup StringTwo }
					/IgnoreCase	1
					/Equal		"Equal"
					/Unequal	"Unequal"
				}
			}
			/Expected       "Equal"
		}
		/StringCompareRendererUnequalCaseSensitiveTest
		{
			/Env
			{
					/StringOne	BAR
					/StringTwo  bar
			}
			/Renderer
			{
				/StringCompareRenderer
				{
					/String1	{ /Lookup StringOne }
					/String2	{ /Lookup StringTwo }
					/IgnoreCase	0
					/Equal		"Equal"
					/Unequal	"Unequal"
				}
			}
			/Expected       "Unequal"
		}
		/XMLEscapeRendererNo
		{
			/Env
			{
				/foo	bar
			}
			/Renderer
			{
				/XMLEscapeRenderer	"nothing"
			}
			/Expected       "nothing"
		}
		/XMLEscapeRendererLookupNo
		{
			/Env
			{
				/foo	bar
			}
			/Renderer
			{
				/XMLEscapeRenderer	{ /Lookup foo }
			}
			/Expected       "bar"
		}
		/XMLEscapeRendererFull
		{
			/Env
			{
				/foo	"<a href=\"b\" label='c' > Fink & Co"
			}
			/Renderer
			{
				/XMLEscapeRenderer	{ /Lookup foo }
			}
			/Expected       "&lt;a href=&quot;b&quot; label=&apos;c&apos; &gt; Fink &amp; Co"
		}
		/XMLUnescapeRendererNo
		{
			/Env
			{
				/foo	bar
			}
			/Renderer
			{
				/XMLUnescapeRenderer	"nothing"
			}
			/Expected       "nothing"
		}
		/XMLUnescapeRendererLookupNo
		{
			/Env
			{
				/foo	bar
			}
			/Renderer
			{
				/XMLUnescapeRenderer	{ /Lookup foo }
			}
			/Expected       "bar"
		}
		/XMLUnescapeRendererEasy
		{
			/Env
			{
				/foo	"&lt;"
			}
			/Renderer
			{
				/XMLUnescapeRenderer	"&lt;"
			}
			/Expected       "<"
		}
		/XMLUnescapeRendererFull
		{
			/Env
			{
				/foo	"&lt;a href=&quot;b&quot; label=&apos;c&apos; &gt; Fink &amp; Co"
			}
			/Renderer
			{
				/XMLUnescapeRenderer	{ /Lookup foo }
			}
			/Expected       "<a href=\"b\" label='c' > Fink & Co"
		}
		/CallRendererTest1
		{
			/Env
			{
				/foo	"Peter"
				/bar	"foo"
				/goo	"bar"
				/therenderer { /Lookup foo }
			}
			/Renderer
			{
				/CallRenderer
				{
					/Renderer	therenderer
					/Parameters
					{
						/foo	{  /Lookup "bar" "hui" }
					}
				}
			}
			/Expected       "foohui"
		}
		/CallRendererTest2
		{
			/Env
			{
				/foo	"Peter"
				/bar	"foo"
				/goo	"bar"
			}
			/Renderer
			{
				/CallRenderer
				{
					/Renderer
					{
						/Lookup foo
					}
					/Parameters
					{
						/foo	{  /Lookup "bar" "hui" }
					}
				}
			}
			/Expected       "foohui"
		}
		/CallRendererTestLaziness
		{
			/Env
			{
				/foo	"Peter"
				/bar	"foo"
				/goo	"bar"
			}
			/Renderer
			{
				/CallRenderer
				{
					/Renderer
					{
						/Lookup "foo.Lookup"
					}
					/Parameters
					{
						/foo	{  /Lookup "bar" "hui" }
					}
				}
			}
			/Expected       "bar"
		}
		/CallRendererTestNesting
		{
			/Env
			{
				/foo	"Peter"
				/bar	"foo"
				/goo	"bar"
			}
			/Renderer
			{
				/CallRenderer
				{
					/Renderer
					{
						/CallRenderer
						{
							/Renderer
							{
								{ /Lookup foo1 }
								{ /Lookup foo2 }
							}
							/Parameters
							{
								/foo2	{  /Lookup "bar" "hui2" }
							}
						}
					}
					/Parameters
					{
						/foo1	{  /Lookup "bar" "hui1" }
					}
				}
			}
			/Expected       "foohui1foohui2"
		}
		/CallRendererTestNestingWithSameParamSlotname
		{
			/Env
			{
				/foo	"Peter"
				/bar	"foo"
				/goo	"bar"
			}
			/Renderer
			{
				/CallRenderer
				{
					/Renderer
					{
						/CallRenderer
						{
							/Renderer
							{
								{ /Lookup foo1 }
							}
							/Parameters
							{
								/foo1	{  /Lookup "bar" "hui2" }
							}
						}
					}
					/Parameters
					{
						/foo1	{  /Lookup "bar" "hui1" }
					}
				}
			}
			/Expected       "foohui2"
		}
		/PositionalCallRendererTest1
		{
			/Env
			{
				/foo	"Peter"
				/bar	"foo"
				/goo	"bar"
				/therenderer { /Lookup "$1" }
			}
			/Renderer
			{
				/CallRenderer
				{
					therenderer
					{  /Lookup "bar" "hui" }
				}
			}
			/Expected       "foohui"
		}
		/PositionalCallRendererTest2
		{
			/Env
			{
				/foo	"Peter"
				/bar	"foo"
				/goo	"bar"
			}
			/Renderer
			{
				/CallRenderer
				{
					{	/Lookup "$1"	}
					{	/Lookup "bar" "hui" }
				}
			}
			/Expected       "foohui"
		}
		/EagerCallRendererTest1
		{
			/Env
			{
				/foo	"Peter"
				/bar	"foo"
				/goo	"bar"
				/therenderer { /Lookup foo }
			}
			/Renderer
			{
				/EagerCallRenderer
				{
					/Renderer	therenderer
					/Parameters
					{
						/foo	{  /Lookup "bar" "hui" }
					}
				}
			}
			/Expected       "foohui"
		}
		/EagerCallRendererTestEagerness
		{
			/Env
			{
				/foo	"Peter"
				/bar	"foo"
				/goo	"bar"
			}
			/Renderer
			{
				/EagerCallRenderer
				{
					/Renderer
					{
						/Lookup "foo.Lookup"
					}
					/Parameters
					{
						/foo	{  /Lookup "bar" "hui" }
					}
				}
			}
			/Expected       ""
		}
		/CallRendererCallsSimpleRenderer {
			/Env {
				/calledRenderer	123
			}
			/Renderer {
				{ /CallRenderer {
					/Renderer	calledRenderer
				} }
			}
			/Expected	123
		}
		/CallRendererCallsHoleRenderSpec {
			/Env {
				/equalMsg	equal
				/unequalMsg	unequal
				/calledRenderer	{
					{ /StringCompareRenderer {
						/String1	myNameIsKuede
						/String2	myNameIsKuede
						/Equal		{ /Lookup equalMsg }
						/Unequal	{ /Lookup unequalMsg }
					} }
				}
			}
			/Renderer {
				{ /CallRenderer {
					/Renderer	calledRenderer
				} }
			}
			/Expected	equal
		}
		/CallRendererOverwritesContext {
			/Env {
				/equalMsg	equal
				/unequalMsg	unequal
				/calledRenderer	{
					{ /StringCompareRenderer {
						/String1	myNameIsKuede
						/String2	myNameIsKuede
						/Equal		{ /Lookup equalMsg }
						/Unequal	{ /Lookup unequalMsg }
					} }
				}
			}
			/Renderer {
				{ /CallRenderer {
					/Renderer	calledRenderer
					/Parameters	{ /equalMsg	"Standard Msg overwritten" }
				} }
			}
			/Expected	"Standard Msg overwritten"
		}
		/ListSizeRendererNamedTest {
			/Env {
				/TheList	{
					/Slot1	{
						/Name		"A"
						/Ort		"B"
					}
					/Slot2	{
						/Name		"C"
						/Ort		"D"
					}
					/Slot3	{
						/Name		"E"
						/Ort		"F"
					}
					/Slot4	{
						/Name		"G"
						/Ort		"H"
					}
				}
			}
			/Renderer {
				/ListSizeRenderer {
					/ListName	TheList
				}
			}
			/Expected	"4"
		}
		/ListSizeRendererNotExistingListTest {
			/Env {
				/TheList	{
					/Slot1	{
						/Name		"A"
						/Ort		"B"
					}
					/Slot2	{
						/Name		"C"
						/Ort		"D"
					}
					/Slot3	{
						/Name		"E"
						/Ort		"F"
					}
					/Slot4	{
						/Name		"G"
						/Ort		"H"
					}
				}
			}
			/Renderer {
				/ListSizeRenderer {
					/ListName	TheGagaList
				}
			}
			/Expected	""
		}
		/ListSizeRendererNotExistingListTestWithDefault {
			/Env {
				/TheList	{
					/Slot1	{
						/Name		"A"
						/Ort		"B"
					}
					/Slot2	{
						/Name		"C"
						/Ort		"D"
					}
					/Slot3	{
						/Name		"E"
						/Ort		"F"
					}
					/Slot4	{
						/Name		"G"
						/Ort		"H"
					}
				}
			}
			/Renderer {
				/ListSizeRenderer {
					/ListName	TheGagaList
					/Default	0
				}
			}
			/Expected	"0"
		}
		/ListSizeRendererUnnamedSlotTest {
			/Env {
				/TheList	{
					/Slot1	{
						/Name		"A"
						/Ort		"B"
					}
					/Slot2	{
						/Name		"C"
						/Ort		"D"
					}
					/Slot3	{
						/Name		"E"
						/Ort		"F"
					}
					/Slot4	{
						/Name		"G"
						/Ort		"H"
					}
				}
			}
			/Renderer {
				/ListSizeRenderer TheList
			}
			/Expected	"4"
		}
		/ListSizeRendererUnnamedSlotInvalidListTest {
			/Env {
				/TheList	{
					/Slot1	{
						/Name		"A"
						/Ort		"B"
					}
					/Slot2	{
						/Name		"C"
						/Ort		"D"
					}
					/Slot3	{
						/Name		"E"
						/Ort		"F"
					}
					/Slot4	{
						/Name		"G"
						/Ort		"H"
					}
				}
			}
			/Renderer {
				/ListSizeRenderer InvalidList
			}
			/Expected	""
		}
		/ListSizeRendererUnnamedSlotInvalidListTestWithDefault {
			/Env {
				/TheList	{
					/Slot1	{
						/Name		"A"
						/Ort		"B"
					}
					/Slot2	{
						/Name		"C"
						/Ort		"D"
					}
					/Slot3	{
						/Name		"E"
						/Ort		"F"
					}
					/Slot4	{
						/Name		"G"
						/Ort		"H"
					}
				}
			}
			/Renderer {
				/ListSizeRenderer { InvalidList 0 }
			}
			/Expected	"0"
		}
		/HTMLTemplateRendererCheckGlobalLowerUpperAndPreserve {
			/TmpStore {
			}
			/Renderer {
				/HTMLTemplateRenderer {
					/Template {
						"<bla toLowerAttr=\"guguseli\">someText</bla>"
						"<fooUpper toUpperAttr=\"guguseli\">someText</fooUpper>"
						"<fooPreserve toPreserveAttr=\"guguseli\">someText</fooPreserve>"
					}
				}
			}
			/Expected	"<bla tolowerattr=\"guguseli\">someText</bla><fooUpper TOUPPERATTR=\"guguseli\">someText</fooUpper><fooPreserve toPreserveAttr=\"guguseli\">someText</fooPreserve>"
		}
		/HTMLTemplateRendererCheckGlobalLowerUpperAndPreserveOverride {
			/TmpStore {
			}
			/Renderer {
				/HTMLTemplateRenderer {
					/Template {
						"<bla toLowerAttr=\"guguseli\">someText</bla>"
						"<fooUpper toUpperAttr=\"guguseli\">someText</fooUpper>"
						"<fooPreserve toPreserveAttr=\"guguseli\">someText</fooPreserve>"
					}
					/ParserConfig {
						/Tags {
							/bla {
								/AttrNameCase	upper
							}
						}
					}
				}
			}
			/Expected	"<bla TOLOWERATTR=\"guguseli\">someText</bla><fooUpper toupperattr=\"guguseli\">someText</fooUpper><fooPreserve topreserveattr=\"guguseli\">someText</fooPreserve>"
		}
		/UnTaintRendererOneTest
		{
			/TmpStore
			{
				/TheString	"<script>alert(\"bad one\")</script>&%"
			}
			/Renderer
			{
				/UnTaintRenderer
				{
						/ToClean { /Lookup TheString }
				}
			}
			/Expected       "scriptalert(\"bad one\")/script"
		}
		/UnTaintRendererWitheBadCharsTest
		{
			/TmpStore
			{
				/TheString	"<script>alert(\"bad one\")</script>"
				/BadOnes	"\"()/"
			}
			/Renderer
			{
				/UnTaintRenderer
				{
					/ToClean { /Lookup TheString }
					/BadChars { /Lookup BadOnes }
				}
			}
			/Expected       "scriptalertbad onescript"
		}
		/UnTaintRendererOneWithUnescaping
		{
			/TmpStore
			{
				/TheString	"%25u002E////ok"
				/BadOnes	"./"
			}
			/Renderer
			{
				/UnTaintRenderer
				{
					/ToClean { /Lookup TheString }
					/BadChars { /Lookup BadOnes }
				}
			}
			/Expected       "ok"
		}
		/UnTaintRendererTwoWithUnescaping
		{
			/TmpStore
			{
				/TheString	"<>%%%25%25%32%35%25%25%37%35002%u0045+++////ok"
				/BadOnes	"+"
			}
			/Renderer
			{
				/UnTaintRenderer
				{
					/ToClean { /Lookup TheString }
					/BadChars { /Lookup BadOnes }
				}
			}
			/Expected       ".////ok"
		}
		/UnTaintRendererThreeWithUnescaping
		{
			/TmpStore
			{
				/TheString	"<>%%%25%25%32%35%25%25%37%35002%u0045+++////ok"
				/BadOnes	"+."
			}
			/Renderer
			{
				/UnTaintRenderer
				{
					/ToClean { /Lookup TheString }
					/BadChars { /Lookup BadOnes }
				}
			}
			/Expected       "////ok"
		}
		/UnTaintRendererFourWithUnescaping
		{
			/TmpStore
			{
				/TheString	"<>&#x0026;&#x23;&#x078;&#x0032;&#054;&#x003B;#x26;&#X0023;&#120;002E;<>"
				/BadOnes	""
			}
			/Renderer
			{
				/UnTaintRenderer
				{
					/ToClean { /Lookup TheString }
					/BadChars { /Lookup BadOnes }
				}
			}
			/Expected       "."
		}
		/UnTaintRendererFiveWithUnescaping
		{
			/TmpStore
			{
				/TheString	"%%&&<>%%%25%25%32%35%25%25%37%35002%u0045+++////ok<>&#x0026;&#x23;&#x078;&#x0032;&#054;&#x003B;#x26;&#X0023;&#120;002E;<>++//"
				/BadOnes	"+"
			}
			/Renderer
			{
				/UnTaintRenderer
				{
					/ToClean { /Lookup TheString }
					/BadChars { /Lookup BadOnes }
				}
			}
			/Expected       ".////ok.//"
		}
		/UnTaintRendererNoArgsGiven
		{
			/TmpStore
			{
			}
			/Renderer
			{
				/UnTaintRenderer
				{
				}
			}
			/Expected       ""
		}
		/DateRendererZeroOffsetTest {
			/TmpStore {}
			/Renderer {
				/DateRenderer {
					/Format	"%d.%m.%Y %H:%M:%S"
					/Date	870912000
					/Offset	0
				}
			}
			/Expected "07.08.1997 02:00:00"
		}
		/DateRendererSecondsOffsetTest {
			/TmpStore {}
			/Renderer {
				/DateRenderer {
					/Format	"%d.%m.%Y %H:%M:%S"
					/Date	870912000
					/Offset	10
				}
			}
			/Expected "07.08.1997 02:00:10"
		}
		/DateRendererNegativeSecondsOffsetTest {
			/TmpStore {}
			/Renderer {
				/DateRenderer {
					/Format	"%d.%m.%Y %H:%M:%S"
					/Date	870912000
					/Offset	-10
				}
			}
			/Expected "07.08.1997 01:59:50"
		}
		/DateRendererDayOffsetTest {
			/TmpStore {}
			/Renderer {
				/DateRenderer {
					/Format	"%d.%m.%Y %H:%M:%S"
					/Date	870912000
					/Offset	"2d"
				}
			}
			/Expected "09.08.1997 02:00:00"
		}
		/DateRendererNegativeDayOffsetTest {
			/TmpStore {}
			/Renderer {
				/DateRenderer {
					/Format	"%d.%m.%Y %H:%M:%S"
					/Date	870912000
					/Offset	"-2d"
				}
			}
			/Expected "05.08.1997 02:00:00"
		}
		/DateRendererNegativeDayOffsetPositionalTest {
			/TmpStore {}
			/Renderer {
				/DateRenderer {
					"%d.%m.%Y %H:%M:%S"
					870912000
					"-2d"
				}
			}
			/Expected "05.08.1997 02:00:00"
		}
		/DateRendererNegativeSecondsOffsetPositionalTest {
			/TmpStore {}
			/Renderer {
				/DateRenderer {
					"%d.%m.%Y %H:%M:%S"
					870912000
					-10
				}
			}
			/Expected "07.08.1997 01:59:50"
		}
		/DateRendererRFC2616DdateTest {
			/TmpStore {}
			/Renderer {
				/DateRenderer {
					/RFC2616Date 1
					/Date 870912000
				}
			}
			/Expected "Thu, 07 Aug 1997 00:00:00 GMT"
		}
		/DateRendererRFC2616DdateOffsetTest {
			/TmpStore {}
			/Renderer {
				/DateRenderer {
					/RFC2616Date 1
					/Date 870912000
					/Offset 3600
				}
			}
			/Expected "Thu, 07 Aug 1997 01:00:00 GMT"
		}
		/UTF8RendererWithSlotnameTest {
			/Env {
				/InString	"H\xe4ll\xf6"
			}
			/Renderer {
				/UTF8Renderer {
					/String			{ /Lookup InString }
				}
			}
			/Expected	"H\xc3\xa4ll\xc3\xb6"
		}
		/UTF8RendererInlineTest {
			/Env {
				/InString	"H\xe4ll\xf6"
			}
			/Renderer {
				/UTF8Renderer { { /Lookup InString } }
			}
			/Expected	"H\xc3\xa4ll\xc3\xb6"
		}
	}
}
